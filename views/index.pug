doctype html
html(lang="en")
  head
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible", content="IE=edge")
    meta(name="viewport", content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")
    script(src="https://cdn.tailwindcss.com")
    title Quran.com OAuth2 Demo
  body
    div(class="min-h-screen flex flex-col justify-center items-center" style="background-color:#22A5AD")
      if isLoggedIn
        div(class="bg-white p-8 rounded-lg shadow-lg max-w-md w-full mb-4")
          h2(class="text-2xl font-bold mb-4 text-gray-800") Welcome!
          if userDetails
            div(class="space-y-4")
              // User Information Section
              div(class="border-b pb-4")
                h3(class="text-lg font-semibold text-gray-800 mb-2") User Information
                div(class="space-y-2")
                  p(class="text-gray-700")
                    span(class="font-semibold") Name:
                    span= userDetails.name
                  p(class="text-gray-700")
                    span(class="font-semibold") Email:
                    span= userDetails.email
                  p(class="text-gray-700")
                    span(class="font-semibold") User ID:
                    span= userDetails.sub

              // Token Information Section
              div(class="border-b pb-4")
                h3(class="text-lg font-semibold text-gray-800 mb-2") Token Information
                div(class="space-y-2")
                  p(class="text-gray-700")
                    span(class="font-semibold") Issued At:
                    span= userDetails.issued_at
                  p(class="text-gray-700")
                    span(class="font-semibold") Authenticated At:
                    span= userDetails.auth_time
                  p(class="text-gray-700")
                    span(class="font-semibold") Expires At:
                    span= userDetails.expires_at
                  p(class="text-gray-700")
                    span(class="font-semibold") Session ID:
                    span= userDetails.session_id

              // Technical Details Section
              div
                h3(class="text-lg font-semibold text-gray-800 mb-2") Technical Details
                div(class="space-y-2")
                  p(class="text-gray-700")
                    span(class="font-semibold") Issuer:
                    span= userDetails.issuer
                  p(class="text-gray-700")
                    span(class="font-semibold") Audience:
                    span= userDetails.audience
                  p(class="text-gray-700")
                    span(class="font-semibold") JTI:
                    span= userDetails.jti
                  p(class="text-gray-700")
                    span(class="font-semibold") Token:
                  pre(class="mt-2 p-3 bg-gray-100 text-sm rounded overflow-auto max-h-80 whitespace-pre-wrap break-all")= JSON.stringify(JSON.parse(token), null, 2)
          else
            p(class="text-gray-700") Loading user details...
        a(class="px-4 py-2 rounded text-white flex items-center space-x-4" href="/logout" style="background-color:#257D83")
          span Logout
      else
        a(class="px-4 py-2 rounded text-white flex items-center space-x-4" href="/auth" style="background-color:#257D83")
          img(src="https://quran.com/images/logo/Logo@192x192.png" width="32" height="32")
          span Continue with Quran.com

